package glass.handlers;

import org.eclipse.jface.text.BadLocationException;
import org.eclipse.jface.text.IDocument;
import org.eclipse.jface.text.ITextSelection;
import org.eclipse.ui.IEditorPart;
import org.eclipse.ui.PlatformUI;
import org.eclipse.ui.texteditor.IDocumentProvider;
import org.eclipse.ui.texteditor.ITextEditor;

public class ParentListener {
	
	protected int getLastLineNumber() {
		IEditorPart editorPart = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getActiveEditor();
		ITextEditor editor = (ITextEditor) editorPart.getAdapter(ITextEditor.class);
		IDocumentProvider provider = editor.getDocumentProvider();
		IDocument document = provider.getDocument(editorPart.getEditorInput());
		ITextSelection textSelection = (ITextSelection) editorPart.getSite().getSelectionProvider().getSelection();
		int offset = textSelection.getOffset();
		int lineNumber = -1;
		
		try {
			lineNumber = document.getLineOfOffset(offset) + 1;
		} catch (BadLocationException e) {
			System.out.println("Error");
		}
		//System.out.println("Offset: " + offset);
		return lineNumber;
	}
	
	protected int getLineNumber() {
		int lineNum;
		return lineNum;
	}
}
